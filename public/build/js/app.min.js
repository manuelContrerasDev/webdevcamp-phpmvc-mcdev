import"./horas.js";import"./ponentes.js";import"./tags.js";import"./slider.js";import"./mapa.js";import"./registro.js";import"./regalos.js";if(function(){if(document.querySelector("#horas")){const a=document.querySelector('[name="categoria_id"]'),n=document.querySelectorAll('[name="dia"]'),r=document.querySelector('[name="dia_id"]'),i=document.querySelector('[name="hora_id"]');a.addEventListener("change",e),n.forEach(t=>t.addEventListener("change",e));let s={categoria_id:+a.value||"",dia:+r.value||""};function e(e){s[e.target.name]=e.target.value,i.value="",r.value="";const o=document.querySelector(".horas__hora--seleccionada");o&&o.classList.remove("horas__hora--seleccionada"),Object.values(s).includes("")||t()}async function t(){const{dia:e,categoria_id:t}=s,a=`/api/eventos-horario?dia_id=${e}&categoria_id=${t}`,n=await fetch(a);!function(e){const t=document.querySelectorAll("#horas li");t.forEach(e=>e.classList.add("horas__hora--deshabilitada"));const a=e.map(e=>e.hora_id),n=Array.from(t);n.filter(e=>!a.includes(e.dataset.horaId)).forEach(e=>e.classList.remove("horas__hora--deshabilitada"));document.querySelectorAll("#horas li:not(.horas__hora--deshabilitada)").forEach(e=>e.addEventListener("click",o))}(await n.json())}function o(e){const t=document.querySelector(".horas__hora--seleccionada");t&&t.classList.remove("horas__hora--seleccionada"),e.target.classList.add("horas__hora--seleccionada"),i.value=e.target.dataset.horaId,r.value=document.querySelector('[name="dia"]:checked').value}Object.values(s).includes("")||(async()=>{await t();const e=i.value,a=document.querySelector(`[data-hora-id="${e}"]`);a.classList.remove("horas__hora--deshabilitada"),a.classList.add("horas__hora--seleccionada"),a.onclick=o})()}}(),document.querySelector("#mapa")){const e=34.0403207,t=-118.2695624,o=16,a=L.map("mapa").setView([e,t],o);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(a),L.marker([e,t]).addTo(a).bindPopup('\n            <h2 class="mapa__heading">DevWebCamp</h2>\n            <p class="mapa__texto">Centro de Convenciones de Los Ángeles</p>\n        ').openPopup()}!function(){const e=document.querySelector("#ponentes");if(e){let o=[],a=[];const n=document.querySelector("#listado-ponentes"),r=document.querySelector('[name="ponente_id"]');function t(e){const t=e.target,o=document.querySelector(".listado-ponentes__ponente--seleccionado");o&&o.classList.remove("listado-ponentes__ponente--seleccionado"),t.classList.add("listado-ponentes__ponente--seleccionado"),r.value=t.dataset.ponenteId}!async function(){const e=await fetch("/api/ponentes");!function(e=[]){o=e.map(e=>({nombre:`${e.nombre.trim()} ${e.apellido.trim()}`,id:e.id}))}(await e.json())}(),e.addEventListener("input",(function(e){const r=e.target.value;if(r.length>3){const e=new RegExp(r,"i");a=o.filter(t=>{if(-1!=t.nombre.toLowerCase().search(e))return t})}else a=[];!function(){for(;n.firstChild;)n.removeChild(n.firstChild);if(a.length>0)a.forEach(e=>{const o=document.createElement("LI");o.classList.add("listado-ponentes__ponente"),o.textContent=e.nombre,o.dataset.ponenteId=e.id,o.onclick=t,n.appendChild(o)});else{const e=document.createElement("P");e.classList.add("listado-ponentes__no-resultado"),e.textContent="No hay resultados para tu búsqueda",n.appendChild(e)}}()})),r.value&&(async()=>{const e=await async function(e){const t="/api/ponente?id="+e,o=await fetch(t);return await o.json()}(r.value),{nombre:t,apellido:o}=e,a=document.createElement("LI");a.classList.add("listado-ponentes__ponente","listado-ponentes__ponente--seleccionado"),a.textContent=`${t} ${o}`,n.appendChild(a)})()}}(),function(){if(document.querySelector("#regalos-grafica")){!async function(){const e=await fetch("/api/regalos"),t=await e.json(),o=document.getElementById("regalos-grafica").getContext("2d");new Chart(o,{type:"bar",data:{labels:t.map(e=>e.nombre),datasets:[{label:"",data:t.map(e=>e.total),backgroundColor:["#ea580c","#84cc16","#22d3ee","#a855f7","#ef4444","#14b8a6","#db2777","#e11d48","#7e22ce"]}]},options:{scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})}()}}();import Swal from"sweetalert2";!function(){let e=[];const t=document.querySelector("#registro-resumen");if(t){document.querySelectorAll(".evento__agregar").forEach(e=>e.addEventListener("click",o));function o({target:t}){e.length<5?(t.disabled=!0,e=[...e,{id:t.dataset.id,titulo:t.parentElement.querySelector(".evento__nombre").textContent.trim()}],a()):Swal.fire({title:"Error",text:"Máximo 5 eventos por registro",icon:"error",confirmButtonText:"OK"})}function a(){if(function(){for(;t.firstChild;)t.removeChild(t.firstChild)}(),e.length>0)e.forEach(o=>{const n=document.createElement("DIV");n.classList.add("registro__evento");const r=document.createElement("H3");r.classList.add("registro__nombre"),r.textContent=o.titulo;const i=document.createElement("BUTTON");i.classList.add("registro__eliminar"),i.innerHTML='<i class="fa-solid fa-trash"></i>',i.onclick=function(){!function(t){e=e.filter(e=>e.id!==t);document.querySelector(`[data-id="${t}"]`).disabled=!1,a()}(o.id)},n.appendChild(r),n.appendChild(i),t.appendChild(n)});else{const e=document.createElement("P");e.textContent="No hay eventos, añade hasta 5 del lado izquierdo",e.classList.add("registro__texto"),t.appendChild(e)}}document.querySelector("#registro").addEventListener("submit",(async function(t){t.preventDefault();const o=document.querySelector("#regalo").value,a=e.map(e=>e.id);if(0===a.length||""===o)return void Swal.fire({title:"Error",text:"Elige al menos un Evento y un Regalo",icon:"error",confirmButtonText:"OK"});const n=new FormData;n.append("eventos",a),n.append("regalo_id",o);const r=await fetch("/finalizar-registro/conferencias",{method:"POST",body:n}),i=await r.json();console.log(i),i.resultado?Swal.fire("Registro Exitoso","Tu registro fue exitoso, te esperamos en DevWebCamp","success").then(()=>location.href="/boleto?id="+i.token):Swal.fire({title:"Error",text:"Hubo un error",icon:"error",confirmButtonText:"OK"}).then(()=>location.reload())})),a()}}();import Swiper,{Navigation}from"swiper";import"swiper/css";import"swiper/css/navigation";document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector(".slider")){const e={slidesPerView:1,spaceBetween:15,freeMode:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3},1200:{slidesPerView:4}}};Swiper.use([Navigation]),new Swiper(".slider",e)}})),function(){const e=document.querySelector("#tags_input");if(e){const n=document.querySelector("#tags"),r=document.querySelector('[name="tags"]');let i=[];function t(){n.textContent="",i.forEach(e=>{const t=document.createElement("LI");t.classList.add("formulario__tag"),t.textContent=e,t.ondblclick=o,n.appendChild(t)}),a()}function o(e){e.target.remove(),i=i.filter(t=>t!==e.target.textContent),a()}function a(){r.value=i.toString()}""!==r.value&&(i=r.value.split(","),t()),e.addEventListener("keypress",(function(o){if(44===o.keyCode){if(""===o.target.value.trim()||o.target.value<1)return;o.preventDefault(),i=[...i,o.target.value.trim()],e.value="",t()}}))}}();
//# sourceMappingURL=app.js.map
